diff -r -u espeak-1.31-source.org/src/Makefile espeak-1.31-source/src/Makefile
--- espeak-1.31-source.org/src/Makefile	2008-01-19 16:50:27.000000000 -0500
+++ espeak-1.31-source/src/Makefile	2008-01-29 04:43:37.919978000 -0500
@@ -11,10 +11,29 @@
 LIB_VERSION = 1
 LIBTAG = $(LIB_VERSION).$(RELEASE)
 
-INSTALL = /usr/bin/install
+# Use SONAME_OPT=-Wl,h, on Solaris
+SONAME_OPT=-Wl,-soname,
+
+# Use EXTRA_LIBS=-lm on Solaris
+EXTRA_LIBS =
+
+INSTALL = install
+
 LN_SF = /bin/ln -sf
 MKDIR = mkdir -p
 
+AUDIO = pulseaudio
+
+ifeq ($(AUDIO),pulseaudio)
+WAVE=wave_pulse.cpp
+LIB_AUDIO=pulse
+USE_AUDIO=USE_PULSEAUDIO
+else
+WAVE=wave.cpp
+LIB_AUDIO=pulse
+USE_AUDIO=USE_PORTAUDIO
+endif
+
 speak_SOURCES = speak.cpp compiledict.cpp dictionary.cpp intonation.cpp \
 	readclause.cpp setlengths.cpp numbers.cpp synth_mbrola.cpp \
 	synthdata.cpp synthesize.cpp translate.cpp tr_english.cpp \
@@ -24,22 +43,22 @@
 	readclause.cpp setlengths.cpp numbers.cpp synth_mbrola.cpp \
 	synthdata.cpp synthesize.cpp translate.cpp tr_english.cpp \
 	tr_languages.cpp voices.cpp wavegen.cpp phonemelist.cpp \
-	espeak_command.cpp event.cpp fifo.cpp wave.cpp debug.cpp
+	espeak_command.cpp event.cpp fifo.cpp $(WAVE) debug.cpp
 
 
 SRCS1=$(speak_SOURCES)
 OBJS1=$(patsubst %.cpp,%.o,$(SRCS1))
-LIBS1=-lstdc++ -lportaudio -lpthread
+LIBS1=-lstdc++ -l$(LIB_AUDIO) -lpthread $(EXTRA_LIBS)
 
 SRCS2=$(libespeak_SOURCES)
 OBJS2=$(patsubst %.cpp,x_%.o,$(SRCS2))
-LIBS2=-lstdc++ -lportaudio -lpthread
+LIBS2=-lstdc++ -l$(LIB_AUDIO) -lpthread
 
 SRCS3 = espeak.cpp
 OBJS3=$(patsubst %.cpp,%.o,$(SRCS3))
-LIBS3=-lstdc++ ./libespeak.so
+LIBS3=-lstdc++ -L . -lespeak
 
-CXXFLAGS=-O2
+CXXFLAGS=-O2 -D$(USE_AUDIO)
 
 
 all: $(BIN_NAME) $(LIB_NAME) $(STATIC_LIB_NAME) $(BIN2_NAME)
@@ -57,11 +76,11 @@
 
 
 x_%.o: %.cpp
-	$(CXX) $(CXXFLAGS) -Wall -fpic -fvisibility=hidden -pedantic \
+	$(CXX) $(CXXFLAGS) -Wall -fpic -pedantic \
 	-I. -D LIBRARY -c -fno-exceptions $<  -o x_$*.o
 
 $(LIB_NAME): $(OBJS2)
-	$(CXX) -shared -Wl,-soname,$(LIB_NAME).$(LIB_VERSION) -o $@ $(OBJS2) $(LIBS2)
+	$(CXX) -shared $(SONAME_OPT)$(LIB_NAME).$(LIB_VERSION) -o $@ $(OBJS2) $(LIBS2)
 
 $(STATIC_LIB_NAME): $(OBJS2)
 	$(AR) cqs $(STATIC_LIB_NAME) $(OBJS2)
diff -r -u espeak-1.31-source.org/src/speech.h espeak-1.31-source/src/speech.h
--- espeak-1.31-source.org/src/speech.h	2008-01-19 16:48:52.000000000 -0500
+++ espeak-1.31-source/src/speech.h	2008-01-29 04:04:34.403265000 -0500
@@ -28,7 +28,7 @@
 
 #define PLATFORM_POSIX
 #define PATHSEP  '/'
-#define USE_PORTAUDIO
+//#define USE_PORTAUDIO
 //#define USE_PULSEAUDIO
 #define USE_NANOSLEEP
 #define __cdecl 
