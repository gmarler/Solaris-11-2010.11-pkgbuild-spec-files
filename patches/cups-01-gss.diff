diff -ur cups-1.3.0/config-scripts/cups-gssapi.m4 cups-1.3.0.patched/config-scripts/cups-gssapi.m4
--- cups-1.3.0/config-scripts/cups-gssapi.m4	2007-08-02 02:02:47.000000000 +0700
+++ cups-1.3.0.patched/config-scripts/cups-gssapi.m4	2007-08-14 16:20:09.054401039 +0700
@@ -23,14 +23,22 @@
 if test x$enable_gssapi != xno; then
 	AC_PATH_PROG(KRB5CONFIG, krb5-config)
 	if test "x$KRB5CONFIG" != x; then
-		if test "x$uname" = "xDarwin"; then
+		case "$uname" in
+		    Darwin)
 			# Mac OS X weak-links to the Kerberos framework...
 			LIBGSSAPI="-weak_framework Kerberos"
-		else
+			;;
+		    SunOS*)
+			CFLAGS="`$KRB5CONFIG --cflags` $CFLAGS"
+			CPPFLAGS="`$KRB5CONFIG --cflags` $CPPFLAGS"
+			LIBGSSAPI="`$KRB5CONFIG --libs` -lgss"
+			;;
+		    *)
 			CFLAGS="`$KRB5CONFIG --cflags gssapi` $CFLAGS"		
-			CPPFLAGS="`$KRB5CONFIG --cflags gssapi` $CPPFLAGS"		
+			CPPFLAGS="`$KRB5CONFIG --cflags gssapi` $CPPFLAGS"
 			LIBGSSAPI="`$KRB5CONFIG --libs gssapi`"
-		fi
+			;;
+		esac
 		AC_DEFINE(HAVE_GSSAPI, 1, [Whether GSSAPI is available])
 	else
 		# Check for vendor-specific implementations...
diff -ur cups-1.3.0/scheduler/ipp.c cups-1.3.0.patched/scheduler/ipp.c
--- cups-1.3.0/scheduler/ipp.c	2007-08-10 05:19:08.000000000 +0700
+++ cups-1.3.0.patched/scheduler/ipp.c	2007-08-14 16:21:19.795448415 +0700
@@ -8307,6 +8307,7 @@
   * Copy the user's credentials to the new cache file...
   */
 
+#ifndef sun
   major_status = gss_krb5_copy_ccache(&minor_status, con->gss_delegated_cred,
 				      job->ccache);
 
@@ -8318,6 +8319,7 @@
     job->ccache = NULL;
     return;
   }
+#endif
 
  /*
   * Add the KRB5CCNAME environment variable to the job so that the
