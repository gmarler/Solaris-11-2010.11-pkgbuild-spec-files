--- openobex-1.3/acinclude.m4.orig	2007-07-03 11:38:13.539823000 +0800
+++ openobex-1.3/acinclude.m4	2007-07-07 17:05:00.501709000 +0800
@@ -62,7 +62,7 @@
 ])
 
 AC_DEFUN([AC_PATH_USB], [
-	PKG_CHECK_MODULES(USB, libusb, usb_found=yes, AC_MSG_RESULT(no))
+	AC_CHECK_LIB(usb, usb_open, [usb_found=yes;],[usb_found=no])
 	AC_SUBST(USB_CFLAGS)
 	AC_SUBST(USB_LIBS)
 	AC_CHECK_LIB(usb, usb_get_busses, dummy=yes, AC_DEFINE(NEED_USB_GET_BUSSES, 1, [Define to 1 if you need the usb_get_busses() function.]))
@@ -128,7 +128,6 @@
 
 	if (test "${usb_enable}" = "yes" && test "${usb_found}" = "yes"); then
 		AC_DEFINE(HAVE_USB, 1, [Define if system supports USB and it's enabled])
-		AC_CHECK_FILE(${prefix}/lib/pkgconfig/libusb.pc, REQUIRES="$REQUIRES libusb")
 	fi
 
 	AM_CONDITIONAL(APPS, test "${apps_enable}" = "yes")
